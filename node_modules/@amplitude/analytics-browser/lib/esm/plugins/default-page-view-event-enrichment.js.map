{"version":3,"file":"default-page-view-event-enrichment.js","sourceRoot":"","sources":["../../../src/plugins/default-page-view-event-enrichment.ts"],"names":[],"mappings":";AAAA,4DAA4D;AAC5D,OAAO,EAA+B,UAAU,EAAE,MAAM,4BAA4B,CAAC;AACrF,OAAO,EAAE,oBAAoB,EAAE,uBAAuB,EAAE,MAAM,cAAc,CAAC;AAU7E,IAAM,gBAAgB,GAA4B;IAChD,WAAW,EAAE,UAAG,oBAAoB,iBAAc;IAClD,aAAa,EAAE,UAAG,oBAAoB,mBAAgB;IACtD,SAAS,EAAE,UAAG,oBAAoB,eAAY;IAC9C,UAAU,EAAE,UAAG,oBAAoB,gBAAa;IAChD,QAAQ,EAAE,UAAG,oBAAoB,cAAW;CAC7C,CAAC;AAEF,MAAM,CAAC,IAAM,8BAA8B,GAAG;IAC5C,IAAM,IAAI,GAAG,8DAA8D,CAAC;IAC5E,IAAM,IAAI,GAAG,UAAU,CAAC,UAAU,CAAC;IACnC,IAAM,KAAK,GAAG;QAAY,sBAAA,SAAS,EAAA;aAAA,CAAC;IACpC,IAAM,OAAO,GAAG,UAAO,KAAgB;;YACrC,IAAI,KAAK,CAAC,UAAU,KAAK,uBAAuB,IAAI,KAAK,CAAC,gBAAgB,EAAE;gBAC1E,KAAK,CAAC,gBAAgB,GAAG,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC,MAAM,CAEnE,UAAC,GAAG,EAAE,EAAY;wBAAZ,KAAA,aAAY,EAAX,GAAG,QAAA,EAAE,KAAK,QAAA;oBAClB,IAAM,uBAAuB,GAAG,gBAAgB,CAAC,GAAG,CAAC,CAAC;oBACtD,IAAI,uBAAuB,EAAE;wBAC3B,GAAG,CAAC,uBAAuB,CAAC,GAAG,KAAK,CAAC;qBACtC;yBAAM;wBACL,GAAG,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;qBAClB;oBACD,OAAO,GAAG,CAAC;gBACb,CAAC,EAAE,EAAE,CAAC,CAAC;aACR;YACD,sBAAO,KAAK,EAAC;;SACd,CAAC;IAEF,OAAO;QACL,IAAI,MAAA;QACJ,IAAI,MAAA;QACJ,KAAK,OAAA;QACL,OAAO,SAAA;KACR,CAAC;AACJ,CAAC,CAAC","sourcesContent":["/* eslint-disable @typescript-eslint/no-unsafe-assignment */\nimport { BaseEvent, EnrichmentPlugin, PluginType } from '@amplitude/analytics-types';\nimport { DEFAULT_EVENT_PREFIX, DEFAULT_PAGE_VIEW_EVENT } from '../constants';\n\ninterface PageViewEventProperties extends Record<string, string | undefined> {\n  page_domain: string;\n  page_location: string;\n  page_path: string;\n  page_title: string;\n  page_url: string;\n}\n\nconst eventPropertyMap: PageViewEventProperties = {\n  page_domain: `${DEFAULT_EVENT_PREFIX} Page Domain`,\n  page_location: `${DEFAULT_EVENT_PREFIX} Page Location`,\n  page_path: `${DEFAULT_EVENT_PREFIX} Page Path`,\n  page_title: `${DEFAULT_EVENT_PREFIX} Page Title`,\n  page_url: `${DEFAULT_EVENT_PREFIX} Page URL`,\n};\n\nexport const defaultPageViewEventEnrichment = (): EnrichmentPlugin => {\n  const name = '@amplitude/plugin-default-page-view-event-enrichment-browser';\n  const type = PluginType.ENRICHMENT;\n  const setup = async () => undefined;\n  const execute = async (event: BaseEvent) => {\n    if (event.event_type === DEFAULT_PAGE_VIEW_EVENT && event.event_properties) {\n      event.event_properties = Object.entries(event.event_properties).reduce<{\n        [key: string]: any;\n      }>((acc, [key, value]) => {\n        const transformedPropertyName = eventPropertyMap[key];\n        if (transformedPropertyName) {\n          acc[transformedPropertyName] = value;\n        } else {\n          acc[key] = value;\n        }\n        return acc;\n      }, {});\n    }\n    return event;\n  };\n\n  return {\n    name,\n    type,\n    setup,\n    execute,\n  };\n};\n"]}